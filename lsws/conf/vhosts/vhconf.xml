<?xml version="1.0" encoding="UTF-8"?>
<virtualHostConfig>
  <docRoot>$VH_ROOT/html</docRoot>
  <vhDomain>$VH_DOMAIN</vhDomain>
  <vhAliases>www.$VH_DOMAIN</vhAliases>
  <adminEmails>admin@$VH_DOMAIN</adminEmails>
  <enableGzip>1</enableGzip>
  <logging>
    <log>
      <useServer>0</useServer>
      <fileName>$VH_ROOT/logs/$VH_NAME.error_log</fileName>
      <logLevel>ERROR</logLevel>
      <rollingSize>10M</rollingSize>
    </log>
    <accessLog>
      <useServer>0</useServer>
      <fileName>$VH_ROOT/logs/$VH_NAME.access_log</fileName>
      <logFormat>&quot;%h %l %u %t &quot;%r&quot; %&gt;s %b &quot;%{Referer}i&quot; &quot;%{User-Agent}i&quot;&quot;</logFormat>
      <logHeaders>5</logHeaders>
      <rollingSize>10M</rollingSize>
      <keepDays>10</keepDays>
    </accessLog>
  </logging>
  <index>
    <useServer>0</useServer>
    <indexFiles>index.php, index.html</indexFiles>
  </index>
  <scriptHandlerList>
    <scriptHandler>
      <suffix>php</suffix>
      <type>lsapi</type>
      <handler>lsphp74</handler>
    </scriptHandler>
  </scriptHandlerList>
  <extProcessorList>
    <extProcessor>
      <type>lsapi</type>
      <name>lsphp74</name>
      <address>uds://tmp/lshttpd/$VH_NAME.sock</address>
      <maxConns>35</maxConns>
      <env>PHP_LSAPI_CHILDREN=35</env>
      <initTimeout>600</initTimeout>
      <retryTimeout>0</retryTimeout>
      <persistConn>1</persistConn>
      <respBuffer>0</respBuffer>
      <autoStart>1</autoStart>
      <path>/usr/local/lsws/lsphp74/bin/lsphp</path>
      <backlog>100</backlog>
      <instances>1</instances>
      <extUser>www-data</extUser>
      <extGroup>www-data</extGroup>
      <runOnStartUp>1</runOnStartUp>
      <priority>0</priority>
      <memSoftLimit>2047M</memSoftLimit>
      <memHardLimit>2047M</memHardLimit>
      <procSoftLimit>400</procSoftLimit>
      <procHardLimit>500</procHardLimit>
    </extProcessor>
  </extProcessorList>
  <rewrite>
    <enable>1</enable>
    <autoLoadHtaccess>1</autoLoadHtaccess>
  </rewrite>
  <vhssl>
    <keyFile>/etc/letsencrypt/live/$VH_NAME/privkey.pem</keyFile>
    <certFile>/etc/letsencrypt/live/$VH_NAME/fullchain.pem</certFile>
    <certChain>1</certChain>
    <ciphers>EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH:ECDHE-RSA-AES128-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA128:DHE-RSA-AES128-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-GCM-SHA128:ECDHE-RSA-AES128-SHA384:ECDHE-RSA-AES128-SHA128:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES128-SHA128:DHE-RSA-AES128-SHA128:DHE-RSA-AES128-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES128-GCM-SHA384:AES128-GCM-SHA128:AES128-SHA128:AES128-SHA128:AES128-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4</ciphers>
    <enableECDHE>1</enableECDHE>
    <renegProtection>1</renegProtection>
    <sslSessionCache>1</sslSessionCache>
    <enableSpdy>15</enableSpdy>
    <enableStapling>1</enableStapling>
    <ocspRespMaxAge>86400</ocspRespMaxAge>
  </vhssl>
</virtualHostConfig>